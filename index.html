<!DOCTYPE html><html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Diccionario Web</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1rem;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }
    #search-container {
      display: flex;
      justify-content: center;
      margin-bottom: 1rem;
    }
    #search-input {
      width: 100%;
      max-width: 400px;
      padding: 0.5rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px 0 0 4px;
    }
    #search-button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-left: none;
      border-radius: 0 4px 4px 0;
      cursor: pointer;
      background-color: #f5f5f5;
    }
    #definition {
      background-color: #f9f9f9;
      padding: 1rem;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      min-height: 100px;
    }
    .term {
      font-weight: bold;
    }
    #definition em {
      display: block;
      margin-top: 0.5rem;
      color: #666;
      font-style: italic;
    }
    /* Enlaces internos */
    #definition a {
      color: #0066cc;
      text-decoration: none;
    }
    #definition a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>Diccionario Web</h1>
  <div id="search-container">
    <input type="text" id="search-input" placeholder="Escribe una palabra..." />
    <button id="search-button">Buscar</button>
  </div>
  <div id="definition">
    Introduce un término y pulsa "Buscar" para ver la definición.
  </div>
  <button id="reset-button" style="display:none; margin-top:0.5rem;">Mostrar original</button>  <script>
    // Variables para restaurar el HTML original
    let originalHTML = '';
    let currentTerm = '';

    // 1) Diccionario de términos
    const dictionary = {
      infinito:   { definicion: "Que crece sin parar." },
      ser:        { definicion: "Existir, tener presencia real en el mundo." },
      monstruo:   { definicion: "Animal fabulado, extraordinario, de figura horrible." },
      tirabuzón:  { definicion: "Cada una de las espirales que forma un cabello enrollado naturalmente." },
      ropa:       { definicion: "Conjunto de prendas que sirven para cubrir el cuerpo humano." },
      ilimitado:  { definicion: "Que no tiene límite." },
      universo:   { definicion: "Todo lo que existe tanto fuera de la Tierra como dentro." },
      dios:       { definicion: "Ser supremo que puede todo lo coherente y que se le rinde culto en buena parte del mundo." },
      cristo:     { definicion: "Hijo de Dios." },
      madre:      { definicion: "Mujer especial que ha engendrado uno o más hijos y que es símbolo de protección.", cita: "«Madre: la palabra más bella pronunciada por el ser humano» — Kahlil Gibran" },
      realidad:   { definicion: "Sustantivo incontable femenino que señala la cualidad de lo real y efectivo que contrasta con lo ilusorio." },
      conciencia: { definicion: "Saber que tiene el ser humano de sí mismo y el entorno que no es fácilmente perdible." },
      homotecia:  { definicion: "Zoom geométrico a una figura que consta de un centro y una razón y fundamentalmente se amplía o reduce según que número real le coloques de razón." },
      espíritu:   { definicion: "Parte inmaterial del binomio cuerpo y mente que sobrevive a la muerte y sirve para pensar, sentir y querer." },
      alma:       { definicion: "Soplo que Adonai puso a Adán como añadido a su ser más bruto y que se traspasó al género humano." },
      messi:      { definicion: "Genio del gol en fútbol." },
      genio:      { definicion: "Poder mental extraordinario que produce obras de excepcional precio." },
      inteligencia:{ definicion: "Capacidad de aprender y resolver problemas adaptándose plásticamente al entorno." },
      triángulo: { definicion: "Forma geométrica plana determinada por tres ángulos y tres lados." },
      galaxia:    { definicion: "Sistema enorme de estrellas que por gravedad tiene forma y que es autónomo dentro del universo." },
      humano:     { definicion: "Individuo de la especie Homo sapiens que habita la Tierra, de postura erguida y gran capacidad simbólica." },
      caos:       { definicion: "Estado amorfo e indefinido, desordenado y confuso que había al inicio antes del cosmos cuyo inicio marcó buenamente el transcurso posterior." },
      infierno:   { definicion: "Lugar de castigo eterno hecho para los reprobos y donde no hay esperanza de existencia de bien." },
      yo:         { definicion: "Primera persona del singular que en nominativo habla del propio sujeto." },
      unidefinido:{ definicion: "Definido con solo una frase." }
    };

    // 2) Regex dinámico (las claves más largas primero para evitar empates)
    const keys      = Object.keys(dictionary).sort((a,b) => b.length - a.length);
    const linkRegex = new RegExp('\\b(' + keys.join('|') + ')\\b', 'gi');

    // 3) Envuelve cada término en <a href="#término">
    function linkify(text) {
      return text.replace(linkRegex, match => {
        const key = match.toLowerCase();
        return `<a href="#${key}">${match}</a>`;
      });
    }

    // 4) Función de búsqueda y renderizado
    function buscar(term) {
      const output = document.getElementById('definition');
      const resetButton = document.getElementById('reset-button');
      currentTerm = term;

      if (!term) {
        output.textContent = 'Por favor, escribe una palabra.';
        resetButton.style.display = 'none';
        return;
      }
      const entry = dictionary[term];
      if (entry && entry.definicion) {
        // Guarda el HTML original (sin enlaces)
        originalHTML = `<span class="term">${term}</span>: ${entry.definicion}` +
          (entry.cita ? `<br><em>${entry.cita}</em>` : '');

        // Renderiza con enlaces
        const htmlDef = linkify(entry.definicion);
        output.innerHTML = `<span class="term">${term}</span>: ${htmlDef}` +
                            (entry.cita ? `<br><em>${entry.cita}</em>` : '');

        // Muestra el botón de restaurar
        resetButton.style.display = 'inline-block';
      } else {
        output.textContent = `La palabra "${term}" no está en el diccionario.`;
        resetButton.style.display = 'none';
      }
    }

    // 5) Atacha buscador a input+botón
    document.getElementById('search-button')
            .addEventListener('click', () => buscar(document.getElementById('search-input').value.trim().toLowerCase()));
    document.getElementById('search-input')
            .addEventListener('keydown', e => {
              if (e.key === 'Enter')
                buscar(e.target.value.trim().toLowerCase());
            });

    // 6) Hash-routing: cuando cambie el hash en la URL, vuelve a buscar
    window.addEventListener('hashchange', () => {
      const term = location.hash.slice(1);
      if (term) {
        document.getElementById('search-input').value = term;
        buscar(term);
      }
    });
    // Si al cargar ya viene con hash, lo procesamos
    if (location.hash) {
      const term = location.hash.slice(1);
      document.getElementById('search-input').value = term;
      buscar(term);
    }

    // 7) Listener para restaurar el HTML original
    document.getElementById('reset-button')
      .addEventListener('click', () => {
        const output = document.getElementById('definition');
        const resetButton = document.getElementById('reset-button');
        output.innerHTML = originalHTML;
        resetButton.style.display = 'none';
      });
  </script></body>
</html>
